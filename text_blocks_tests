from enum import Enum
import re

class BlockType(Enum):
    PARAGRAPH = "paragraph"
    HEADING = "heading"
    CODE = "code"
    QUOTE =  "quote"
    UNORDERED_LIST = "unordered list"
    ORDERED_LIST = "ordered list "


def block_to_block_type(block):
    if re.match(r'^#{1,6} ', block):
        return BlockType.HEADING
    if re.match(r'^```',block):
        if re.match(r'```$',block):
            return BlockType.CODE
    if re.match(r'^>',block):
        return BlockType.QUOTE
    if re.match(r'^- ',block):
        return BlockType.UNORDERED_LIST
    if re.match(r'^\d. ',block):
        if is_in_order(block):
            return BlockType.ORDERED_LIST
    return BlockType.PARAGRAPH

def is_in_order(text):
    ordered = True
    lines = text.split("\n")
    for i,line in enumerate(lines):
        expected_val = i + 1
        if not line.startswith(f'{expected_val}'):
            return False
    
    return ordered

ordered_test = """1. do things
2. do other things
3. do more things """
print(is_in_order(ordered_test))

test_string = """
# this is the title

1. do things
2. do other things
3. do more things



this is a random paragraph. it will have a new line. 
but we don't care about new lines just multi empty lines









- this is a list
- lists have this and that
- also all we need is perfectly written strings.
"""

def markdown_to_blocks(markdown):
    temp_list_of_blocks = markdown.split("\n\n")
    list_of_blocks = []
    for block in temp_list_of_blocks:
        new_block = block.strip()
        if new_block != "":
            list_of_blocks.append(new_block)
    return list_of_blocks

count = 0
test_markdown = markdown_to_blocks(test_string)
for test in test_markdown:
    print( test, "end",count, "Block type: ", block_to_block_type(test))
    count+=1 
print("test_markdown count: ", len(test_markdown))
print(test_markdown)
